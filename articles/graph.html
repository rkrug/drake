<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Graphs with drake â€¢ drake</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">drake</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/drake.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/faq.html">FAQ</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/example-packages.html">Example: R package download trends</a>
    </li>
    <li>
      <a href="../articles/example-gsp.html">Example: gross state products</a>
    </li>
    <li>
      <a href="../articles/example-basic.html">Basic example</a>
    </li>
    <li>
      <a href="../articles/best-practices.html">General best practices for drake projects</a>
    </li>
    <li>
      <a href="../articles/debug.html">Debugging and testing drake projects</a>
    </li>
    <li>
      <a href="../articles/graph.html">Graphs with drake</a>
    </li>
    <li>
      <a href="../articles/parallelism.html">Parallel computing</a>
    </li>
    <li>
      <a href="../articles/timing.html">Time logging</a>
    </li>
    <li>
      <a href="../articles/storage.html">Storage</a>
    </li>
    <li>
      <a href="../articles/caution.html">Caution</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/drake">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Graphs with drake</h1>
            <h3 class="subtitle">Visualize your workflow.</h3>
                        <h4 class="author">Will Landau</h4>
            
            <h4 class="date">2018-02-28</h4>
          </div>

    
    
<div class="contents">
<p><code>Drake</code> has powerful visuals to help you plan your project. You can generate an interactive workflow network with either <code><a href="../reference/vis_drake_graph.html">drake_graph()</a></code> or <code><a href="../reference/vis_drake_graph.html">vis_drake_graph()</a></code>. Then click, drag, hover, zoom, and pan. Use either the mouse or the green buttons near the bottom.</p>
<div id="dependency-reactivity" class="section level1">
<h1 class="hasAnchor">
<a href="#dependency-reactivity" class="anchor"></a>Dependency reactivity</h1>
<p>Initially, your entire project is out of date.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(drake)
<span class="kw"><a href="../reference/load_basic_example.html">load_basic_example</a></span>() <span class="co"># Get the code with drake_example("basic").</span>
config &lt;-<span class="st"> </span><span class="kw"><a href="../reference/drake_config.html">drake_config</a></span>(my_plan)
<span class="kw"><a href="../reference/vis_drake_graph.html">vis_drake_graph</a></span>(config) <span class="co"># Same as drake_graph()</span></code></pre></div>
<iframe src="https://cdn.rawgit.com/ropensci/drake/0fdb7d29/images/outdated.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>After <code><a href="../reference/make.html">make()</a></code>, the whole project is all caught up.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">config &lt;-<span class="st"> </span><span class="kw"><a href="../reference/make.html">make</a></span>(my_plan, <span class="dt">jobs =</span> <span class="dv">4</span>, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)
<span class="kw"><a href="../reference/vis_drake_graph.html">vis_drake_graph</a></span>(config)</code></pre></div>
<iframe src="https://cdn.rawgit.com/ropensci/drake/0fdb7d29/images/built.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>But when you change a dependency, some targets are out of date until the next <code><a href="../reference/make.html">make(my_plan)</a></code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg2 &lt;-<span class="st"> </span>function(d){
  d$x3 &lt;-<span class="st"> </span>d$x ^<span class="st"> </span><span class="dv">3</span>
  <span class="kw">lm</span>(y ~<span class="st"> </span>x3, <span class="dt">data =</span> d)
}
<span class="kw"><a href="../reference/vis_drake_graph.html">vis_drake_graph</a></span>(config)</code></pre></div>
<iframe src="https://cdn.rawgit.com/ropensci/drake/0fdb7d29/images/reg2.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
</div>
<div id="subgraphs" class="section level1">
<h1 class="hasAnchor">
<a href="#subgraphs" class="anchor"></a>Subgraphs</h1>
<p>Graphs can grow enormous for serious projects, so there are multiple ways to focus on a manageable subgraph. The most brute-force way is to just pick a manual <code>subset</code> of nodes. However, with the <code>subset</code> argument, <code><a href="../reference/vis_drake_graph.html">vis_drake_graph()</a></code> may drop intermediate nodes and edges.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_drake_graph.html">vis_drake_graph</a></span>(config, <span class="dt">subset =</span> <span class="kw">c</span>(<span class="st">"regression2_small"</span>, <span class="st">"</span><span class="ch">\"</span><span class="st">report.md</span><span class="ch">\"</span><span class="st">"</span>))</code></pre></div>
<iframe src="https://cdn.rawgit.com/ropensci/drake/0fdb7d29/images/subset.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>The rest of the subgraph functionality preserves connectedness. Use <code>targets_only</code> to ignore the imports.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_drake_graph.html">vis_drake_graph</a></span>(config, <span class="dt">targets_only =</span> <span class="ot">TRUE</span>)</code></pre></div>
<iframe src="https://cdn.rawgit.com/ropensci/drake/0fdb7d29/images/targetsonly.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>Similarly, you can just show downstream nodes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_drake_graph.html">vis_drake_graph</a></span>(config, <span class="dt">from =</span> <span class="kw">c</span>(<span class="st">"regression2_small"</span>, <span class="st">"regression2_large"</span>))</code></pre></div>
<iframe src="https://cdn.rawgit.com/ropensci/drake/0fdb7d29/images/fromout.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>Or upstream ones.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_drake_graph.html">vis_drake_graph</a></span>(config, <span class="dt">from =</span> <span class="st">"small"</span>, <span class="dt">mode =</span> <span class="st">"in"</span>)</code></pre></div>
<iframe src="https://cdn.rawgit.com/ropensci/drake/0fdb7d29/images/fromin.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>In fact, let us just take a small neighborhood around a target in both directions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_drake_graph.html">vis_drake_graph</a></span>(config, <span class="dt">from =</span> <span class="st">"small"</span>, <span class="dt">mode =</span> <span class="st">"all"</span>, <span class="dt">order =</span> <span class="dv">1</span>)</code></pre></div>
<iframe src="https://cdn.rawgit.com/ropensci/drake/0fdb7d29/images/fromall.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>The <code>report.md</code> node is drawn in somewhat, but it is still the farthest to the right in order to communicate <code>drake</code>â€™s parallel computing strategy.</p>
</div>
<div id="parallel-computing-laid-bare" class="section level1">
<h1 class="hasAnchor">
<a href="#parallel-computing-laid-bare" class="anchor"></a>Parallel computing laid bare</h1>
<p><code>Drake</code> shows its parallel computing strategy plainly in the graph.</p>
<iframe src="https://cdn.rawgit.com/ropensci/drake/0fdb7d29/images/reg2.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>The nodes in each column above are conditionally independent given the dependencies to the left. So in general, the targets and imports are processed column by column from left to right, and everything within a column is executed in parallel. When some targets are already up to date, <code>drake</code> searches ahead in the graph to maximize the number of outdated targets in each parallelizable stage.</p>
<p>To show the parallelizable stages of the next <code><a href="../reference/make.html">make()</a></code> programmatically, use the <code><a href="../reference/parallel_stages.html">parallel_stages()</a></code> function. All the targets/imports in a stage are processed in parallel before moving on to the next stage.</p>
</div>
<div id="control-the-legend-" class="section level1">
<h1 class="hasAnchor">
<a href="#control-the-legend-" class="anchor"></a>Control the legend.</h1>
<p>To remove superfluous information from the legend, set the <code>full_legend</code> argument to <code>FALSE</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_drake_graph.html">vis_drake_graph</a></span>(config, <span class="dt">full_legend =</span> <span class="ot">FALSE</span>)</code></pre></div>
<iframe src="https://cdn.rawgit.com/ropensci/drake/0fdb7d29/images/reg2-small-legend.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
<p>To remove the legend altogether, set the <code>ncol_legend</code> argument to <code>0</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/vis_drake_graph.html">vis_drake_graph</a></span>(config, <span class="dt">ncol_legend =</span> <span class="dv">0</span>)</code></pre></div>
<iframe src="https://cdn.rawgit.com/ropensci/drake/0fdb7d29/images/reg2-no-legend.html" width="100%" height="600px" allowtransparency="true" style="border: none; box-shadow: none">
</iframe>
</div>
<div id="more-flexibility" class="section level1">
<h1 class="hasAnchor">
<a href="#more-flexibility" class="anchor"></a>More flexibility</h1>
<p>We have only scratched the surface of <code><a href="../reference/vis_drake_graph.html">vis_drake_graph()</a></code>. The help files (<code><a href="../reference/vis_drake_graph.html">?vis_drake_graph</a></code>) document much more functionality. In particular, the <code><a href="../reference/dataframes_graph.html">dataframes_graph()</a></code> and <code><a href="../reference/render_drake_graph.html">render_drake_graph()</a></code> functions let you customize your own <a href="http://datastorm-open.github.io/visNetwork/">visNetwork graph</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#dependency-reactivity">Dependency reactivity</a></li>
      <li><a href="#subgraphs">Subgraphs</a></li>
      <li><a href="#parallel-computing-laid-bare">Parallel computing laid bare</a></li>
      <li><a href="#control-the-legend-">Control the legend.</a></li>
      <li><a href="#more-flexibility">More flexibility</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by William Michael Landau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
