<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>List the types of supported parallel computing in drake. <U+2014> parallelism_choices â€¢ drake</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">drake</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/drake.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/faq.html">FAQ</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/example-packages.html">Example: R package download trends</a>
    </li>
    <li>
      <a href="../articles/example-gsp.html">Example: gross state products</a>
    </li>
    <li>
      <a href="../articles/example-basic.html">Basic example</a>
    </li>
    <li>
      <a href="../articles/best-practices.html">General best practices for drake projects</a>
    </li>
    <li>
      <a href="../articles/debug.html">Debugging and testing drake projects</a>
    </li>
    <li>
      <a href="../articles/graph.html">Graphs with drake</a>
    </li>
    <li>
      <a href="../articles/parallelism.html">Parallel computing</a>
    </li>
    <li>
      <a href="../articles/timing.html">Time logging</a>
    </li>
    <li>
      <a href="../articles/storage.html">Storage</a>
    </li>
    <li>
      <a href="../articles/caution.html">Caution</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/drake">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>List the types of supported parallel computing in drake.</h1>
    </div>

    
    <p>These are the possible values of the
<code>parallelism</code> argument to <code><a href='make.html'>make()</a></code>.</p>
    

    <pre class="usage"><span class='fu'>parallelism_choices</span>(<span class='kw'>distributed_only</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>distributed_only</th>
      <td><p>logical, whether to return only
the distributed backend types, such as <code>Makefile</code> and
<code>parLapply</code></p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Character vector listing the types of parallel
computing supported.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Run <code><a href='make.html'>make(..., parallelism = x, jobs = n)</a></code> for any of
the following values of <code>x</code> to distribute targets over parallel
units of execution.</p><dl class='dl-horizontal'>
<dt>'parLapply'</dt><dd><p>launches multiple processes in a single R session
using <code><a href='http://www.rdocumentation.org/packages/parallel/topics/clusterApply'>parallel::parLapply()</a></code>.
This is single-node, (potentially) multicore computing.
It requires more overhead than the <code>'mclapply'</code> option,
but it works on Windows. If <code>jobs</code> is <code>1</code> in
<code><a href='make.html'>make()</a></code>, then no 'cluster' is created and
no parallelism is used.</p></dd>
    <dt>'mclapply'</dt><dd><p>uses multiple processes in a single R session.
This is single-node, (potentially) multicore computing.
Does not work on Windows for <code>jobs &gt; 1</code>
because <code>mclapply()</code> is based on forking.</p></dd>
    <dt>'future_lapply'</dt><dd><p>opens up a whole trove of parallel backends
powered by the <code>future</code> and <code>future.batchtools</code>
packages. First, set the parallel backend globally using
<code><a href='http://www.rdocumentation.org/packages/future/topics/plan'>future::plan()</a></code>.
Then, apply the backend to your drake_plan
using <code><a href='make.html'>make(..., parallelism = "future_lapply", jobs = ...)</a></code>.
But be warned: the environment for each target needs to be set up
from scratch, so this backend type is higher overhead than either
<code>mclapply</code> or <code>parLapply</code>.
Also, the <code>jobs</code> argument only applies to the imports.
To set the max number of jobs, set the <code>workers</code>
argument where it exists. For example, call
<code><a href='http://www.rdocumentation.org/packages/future/topics/plan'>future::plan(multisession(workers = 4))</a></code>,
then call <code><a href='make.html'>make</a>(your_plan, parallelism = "future_lapply")</code>.
You might also try options(mc.cores = jobs),
or see future::.options
for environment variables that set the max number of jobs.</p></dd>
    <dt>'Makefile'</dt><dd><p>uses multiple R sessions
by creating and running a Makefile.
For distributed computing on a cluster or supercomputer,
try <code><a href='make.html'>make</a>(..., parallelism = 'Makefile',
  prepend = 'SHELL=./shell.sh')</code>.
You need an auxiliary <code>shell.sh</code> file for this,
and <code><a href='shell_file.html'>shell_file()</a></code>
writes an example.
    Here, Makefile-level parallelism is only used for
targets in your workflow plan
data frame, not imports. To process imported objects and files,
drake selects the best parallel
backend for your system and uses
the number of jobs you give to the <code>jobs</code>
argument to <code><a href='make.html'>make()</a></code>.
To use at most 2 jobs for imports and at most 4 jobs
for targets, run
<code><a href='make.html'>make(..., parallelism = 'Makefile', jobs = 2, args = '--jobs=4')</a></code>
    Caution: the Makefile generated by
<code><a href='make.html'>make</a>(..., parallelism = 'Makefile')</code>
is NOT standalone. DO NOT run it outside of
<code><a href='make.html'>make()</a></code> or <code><a href='make.html'>make()</a></code>.
Also, Windows users will need to download and install Rtools.</p></dd>
</dl>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='make.html'>make()</a></code>, <code><a href='shell_file.html'>shell_file()</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># See all the parallel computing options.</span>
<span class='fu'>parallelism_choices</span>()</div><div class='output co'>#&gt; [1] "mclapply"      "parLapply"     "future"        "future_lapply"
#&gt; [5] "Makefile"     </div><div class='input'><span class='co'># See just the distributed computing options.</span>
<span class='fu'>parallelism_choices</span>(<span class='kw'>distributed_only</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; [1] "future"        "future_lapply" "Makefile"     </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by William Michael Landau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
